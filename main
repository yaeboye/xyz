{
  "metadata": {
    "name": "New JSNB",
    "language_info": {
      "name": "JavaScipt",
      "version": "8.0"
    }
  },
  "jsnbversion": "v0.1",
  "cells": [
    {
      "code": "<!DOCTYPE html>\n<html>\n  <head>\n\n  </head>\n  <body style=\"background-color: #000000; text-align: center\">\n      <canvas id=\"gameCanvas\" style=\"width: 512px; height: 384px\" width=\"1024\" height=\"768\"></canvas>\n  </body>\n</html>",
      "status": "",
      "output": "\n\n  \n\n  \n  \n      <canvas id=\"gameCanvas\" style=\"width: 512px; height: 384px\" width=\"1024\" height=\"768\"></canvas>\n  \n",
      "type": "html"
    },
    {
      "code": "var q6 = ' \"Helvetica Neue\", Helvetica, Arial, sans-serif';\nvar c6 = 0;\nvar u4 = {\n  LIGHT: { road: \"#3a3a3a\", grass: \"#047804\", v9: \"#a02222\", lane: \"#CCCCCC\" },\n  DARK: { road: \"#3a3a3a\", grass: \"#006A00\", v9: \"#BBBBBB\" },\n  START: { road: \"white\", grass: \"#009A00\", v9: \"#BBBBBB\" },\n  FINISH: { road: \"black\", grass: \"black\", v9: \"black\" },\n};\nvar cntx = null;\nfunction j7(t, i) {\n  cntx.clearRect(0, 0, t, i);\n}\nfunction g1(t) {\n  cntx.globalAlpha = t;\n}\nfunction m0(t, i, a, r) {\n  cntx.fillRect(t, i, a, r);\n}\nfunction a6(t, i, a, r) {\n  return cntx.createLinearGradient(t, i, a, r);\n}\nfunction g0(t) {\n  cntx.strokeStyle = t;\n}\nfunction p2() {\n  cntx.stroke();\n}\nfunction k4(t) {\n  cntx.fillStyle = t;\n}\nfunction k3() {\n  cntx.beginPath();\n}\nfunction p0(t, i) {\n  cntx.moveTo(t, i);\n}\nfunction t4(t, i, a, r, e, s) {\n  cntx.arc(t, i, a, r, e, s);\n}\nfunction o8(t, i) {\n  cntx.lineTo(t, i);\n}\nfunction k0() {\n  cntx.closePath();\n}\nfunction s9() {\n  cntx.fill();\n}\nfunction k9(t, i, a) {\n  cntx.fillText(t, i, a);\n}\nfunction s3() {\n  cntx.save();\n}\nfunction n0() {\n  cntx.restore();\n}\nfunction j4(t, i) {\n  cntx.translate(t, i);\n}\nfunction p9(t) {\n  cntx.rotate(t);\n}\nfunction i5(t, i, a, r, e, s, n, h, v) {\n  cntx.drawImage(t, i, a, r, e, s, n, h, v);\n}\nvar M = Math;\nvar PI = Math.PI;\nfunction r9() {\n  return M.random();\n}\nfunction m8(t) {\n  return M.floor(r9() * t);\n}\nfunction sin(t) {\n  return M.sin(t);\n}\nfunction cos(t) {\n  return M.cos(t);\n}\nvar l1 = 600,\n  k6 = 600,\n  l6 = 2400,\n  k5 = 2400,\n  b4 = 1280,\n  a9 = 480,\n  c2 = 600,\n  b9 = 600,\n  j9 = l9(l1, k6),\n  t1 = l9(l6, k5);\n(j8 = t1.c),\n  (h0 = t1.x),\n  (e3 = l9(b4, a9)),\n  (e2 = l9(b4, a9)),\n  (e1 = l9(b4, a9)),\n  (j1 = l9(c2, b9)),\n  (a7 = a5 = f1 = d3 = b7 = d8 = d0 = e8 = 0),\n  (c8 = []),\n  (q1 = 0);\nvar r4 = \"#222222\";\nvar q2 = \"#cccccc\";\nvar q7 = \"#e5e5e5\";\nfunction m3() {\n  j9.x.clearRect(0, 0, l1, k6);\n}\nfunction l9(t, i) {\n  var a = document.createElement(\"canvas\");\n  a.width = t;\n  a.height = i;\n  var r = a.getContext(\"2d\");\n  return { c: a, x: r };\n}\nvar p3 = 0;\nvar p4 = 0;\nvar c1 = 0;\nfunction j2() {\n  p3 = 0;\n  p4 = 0;\n  c1 = 0;\n  h0.clearRect(0, 0, l6, k5);\n  e1.x.clearRect(0, 0, b4, a9);\n  e2.x.clearRect(0, 0, b4, a9);\n  e3.x.clearRect(0, 0, b4, a9);\n}\nfunction e6(t, i, a, r) {\n  var e = 0;\n  k4(r);\n  var s = a + a * r9();\n  k3();\n  p0(t + s * cos(e), i + s * sin(e));\n  for (var n = 1; n < 30; n++) {\n    e = (n * PI * 2) / 30;\n    s = a + a * r9();\n    o8(t + s * cos(e), i + s * sin(e));\n  }\n  k0();\n  s9();\n}\nfunction a8() {\n  var t = j9.x.getImageData(0, 0, j9.c.width, j9.c.height);\n  var i = new Uint32Array(t.data.buffer);\n  var a, r;\n  var e = j9.c.width;\n  var s = j9.c.height;\n  var n = e,\n    h = s,\n    v = 0,\n    f = 0;\n  for (r = 0; r < s; r++) {\n    for (a = 0; a < e; a++) {\n      if (i[a + r * e] > 0) {\n        if (a < n) {\n          n = a;\n        }\n        if (a > v) {\n          v = a;\n        }\n        if (r < h) {\n          h = r;\n        }\n        if (r > f) {\n          f = r;\n        }\n      }\n    }\n  }\n  var c = f - 50;\n  if (c < 0) {\n    c = 0;\n  }\n  var u = e;\n  var o = 0;\n  for (r = c; r < f; r++) {\n    for (a = 0; a < e; a++) {\n      if (i[a + r * e] > 0) {\n        if (a < u) {\n          u = a;\n        }\n        if (a > o) {\n          o = a;\n        }\n      }\n    }\n  }\n  return { x: n, y: h, w: v - n, h: f - h, cx: u - n, cw: o - u };\n}\nfunction q3(t) {\n  var i = t || 0;\n  var a = a8();\n  if (p3 + a.w > l6) {\n    p3 = 0;\n    p4 += c1;\n    c1 = 0;\n  }\n  if (a.h > c1) {\n    c1 = a.h;\n  }\n  h0.save();\n  var r = p3;\n  if (i) {\n    h0.scale(-1, 1);\n    r = -p3 - a.w;\n    a.cx = a.w - a.cx - a.cw;\n  }\n  h0.drawImage(j9.c, a.x, a.y, a.w, a.h, r, p4, a.w, a.h);\n  h0.restore();\n  var e = { x: p3, y: p4, w: a.w, h: a.h, cx: a.cx, cw: a.cw };\n  p3 += a.w + 5;\n  return e;\n}\nfunction e5() {\n  cntx = j9.x;\n  m3();\n  k4(\"#996644\");\n  m0(0, 0, 200, 200);\n  k4(\"#996644\");\n  m0(10, 200, 10, 10);\n  k4(\"#996644\");\n  m0(180, 200, 10, 10);\n  k4(q2);\n  m0(10, 10, 180, 180);\n  k3();\n  p0(20, 100);\n  o8(160, 30);\n  o8(160, 170);\n  o8(20, 100);\n  k4(\"#cc2211\");\n  s9();\n  k4(q2);\n  m0(10, 10, 20, 180);\n  d8 = q3();\n  d0 = q3(1);\n}\nfunction q5(t, i) {\n  var a = [];\n  var r = 0;\n  var e = 0;\n  a[e++] = 0;\n  var s = 1;\n  for (var n = 0; n < t; n++) {\n    r = r + r9() * i;\n    a[e++] = r;\n  }\n  while (r > 0) {\n    r = r - r9() * i;\n    a[e++] = r;\n  }\n  return a;\n}\nfunction b1() {\n  cntx = e1.x;\n  var t = [\"#114433\", \"#114e33\", \"#115433\", \"#113433\", \"#114433\"];\n  var i = 0;\n  for (var a = 0; a < 4; a++) {\n    var r = i;\n    var e = 10 + 40 * r9();\n    for (var s = 0; s < e; s++) {\n      var n = q5(8, 7);\n      var h = m8(t.length);\n      k4(t[h]);\n      k3();\n      p0(r, 240 - n[0]);\n      for (var v = 1; v < n.length; v++) {\n        o8(r + v, 240 - n[v]);\n      }\n      k0();\n      s9();\n      r += 2 + r9() * 4;\n    }\n    var t = [\"#226639\", \"#115e33\", \"#316433\", \"#215433\", \"#114433\"];\n    var r = i;\n    for (var s = 0; s < e; s++) {\n      var n = q5(4, 4);\n      var h = m8(t.length);\n      k4(t[h]);\n      k3();\n      p0(r, 240 - n[0]);\n      for (var v = 1; v < n.length; v++) {\n        o8(r + v, 240 - n[v]);\n      }\n      k0();\n      s9();\n      r += 2 + r9() * 5;\n    }\n    i = r + 50 + r9() * 180;\n  }\n}\nfunction t5(t) {\n  cntx = e2.x;\n  var i = [];\n  var a = [];\n  var r = [];\n  var e = [];\n  var s = 0;\n  var n = 0;\n  var h = 1;\n  h = 0.1 + 3 * r9();\n  var v = 20 * 100 * r9();\n  for (var f = 0; f < 100; f++) {\n    s = s + r9() * h;\n    i[n] = s;\n    a[n] = s;\n    n++;\n    h += 0.01;\n  }\n  var v = 5 + 8 * r9();\n  for (var f = 0; f < v; f++) {\n    s = s + (0.4 - r9()) * 2;\n    a[n] = s;\n    i[n++] = s;\n  }\n  var c = [];\n  var u = s;\n  while (u > 0) {\n    u -= r9() * 5;\n    c.push(u);\n  }\n  if (r9() > 0.6) {\n    v = 160 * r9();\n  } else {\n    v = 20 * r9();\n  }\n  for (var f = 0; f < v; f++) {\n    s = s + (0.4 - r9()) * 2;\n    i[n++] = s;\n  }\n  while (s > 0) {\n    s = s - r9() * h;\n    i[n++] = s;\n    h -= 0.003;\n    if (h < 0) {\n      h = 0.03;\n    }\n  }\n  for (var f = 0; f < a.length - 20; f++) {\n    u = a[f] + r9();\n    r.push(u);\n  }\n  for (var f = 0; f < r.length - 10; f++) {\n    u -= r9() * 2;\n    e.push(u);\n  }\n  var o = 260;\n  var l = t;\n  k4(\"#114433\");\n  k3();\n  p0(l, o - i[0]);\n  for (var d = 1; d < i.length; d++) {\n    o8(l + d, o - i[d]);\n  }\n  k0();\n  s9();\n  l = t;\n  k4(\"#224a33\");\n  k3();\n  p0(l, o - a[0]);\n  for (var d = 1; d < a.length; d++) {\n    o8(l, o - a[d]);\n    l++;\n  }\n  for (var d = 1; d < c.length; d++) {\n    o8(l, o - c[d]);\n    if (r9() > 0.4) {\n      l--;\n    } else if (r9() > 0.4) {\n      l++;\n    }\n  }\n  k0();\n  s9();\n  l = t + 4;\n  k4(\"#335a3a\");\n  k3();\n  p0(l, o - r[0]);\n  for (var d = 1; d < r.length; d++) {\n    o8(l, o - r[d]);\n    l++;\n  }\n  for (var d = 1; d < e.length; d++) {\n    o8(l, o - e[d]);\n    if (r9() > 0.8) {\n      l++;\n    } else if (r9() > 0.1) {\n      l--;\n    }\n  }\n  k0();\n  s9();\n  return i;\n}\nfunction a3() {\n  var t = 0;\n  for (var i = 0; i < 20; i++) {\n    t5(t);\n    t += 3 + r9() * 100;\n  }\n}\nvar tree = {\n  o0: \"\",\n  draw: function () {\n    j4(500 / 2, 500);\n    this.o0 = \"#\" + (16777216 + r9() * 16777215).toString(16).substr(1, 6);\n    cntx.lineWidth = 1 + r9() * 20;\n    cntx.lineJoin = \"round\";\n    this.u2(0);\n  },\n  u2: function (t) {\n    if (t < 12) {\n      k3();\n      p0(0, 0);\n      o8(0, -500 / 10);\n      p2();\n      j4(0, -500 / 10);\n      var i = -(r9() * 0.1) + 0.1;\n      p9(i);\n      if (r9() * 1 < 0.6) {\n        p9(-0.35);\n        cntx.scale(0.7, 0.7);\n        s3();\n        this.u2(t + 1);\n        n0();\n        p9(0.6);\n        s3();\n        this.u2(t + 1);\n        n0();\n      } else {\n        this.u2(t);\n      }\n    } else {\n      k4(this.o0);\n      m0(0, 0, 500, 200);\n      p2();\n    }\n  },\n};\nvar k1 = [];\nfunction createTrees() {\n  k1 = [];\n  for (var t = 0; t < 6; t++) {\n    var i = 0.6;\n    var a = false;\n    var r = 0;\n    while (!a) {\n      cntx = j9.x;\n      j9.x.save();\n      m3();\n      tree.draw();\n      var e = a8();\n      a = (e.w < 300 && e.h < 400) || r > 5;\n      j9.x.restore();\n      r++;\n    }\n    k1[t] = q3();\n  }\n}\nfunction c0(t, i, a, r) {\n  cntx = e1.x;\n  var e = 30;\n  var s = 20;\n  var n = 2;\n  var h = 1;\n  var v = 1;\n  var f = 4;\n  var c = 8;\n  if (i == 1) {\n    h = 2;\n    v = 2;\n    f = 3;\n    c = 10;\n    e = 40;\n    s = 25;\n  }\n  if (i == 2) {\n    h = 4;\n    f = 2;\n    c = 6;\n    e = 20;\n    s = 18;\n  }\n  var u = 260;\n  e += 30 * r9();\n  k4(a);\n  m0(t, u - e, s, e);\n  if (r9() < 0.4) {\n    var o = 5;\n    var l = 8;\n    m0(t + o, u - (e + l), s - 2 * o, e + l);\n  }\n  if (r9() < 0.2) {\n    var o = 5;\n    var l = 13;\n    var d = 2;\n    m0(t + o, u - (e + l), d, e + l);\n  }\n  for (var p = 0; p < c; p++) {\n    var x = n + p * (v + n);\n    for (var g = 0; g < f; g++) {\n      var m = n + g * (h + n);\n      k4(r);\n      m0(t + m, u - e + x, h, v);\n    }\n  }\n}\nfunction a4(t) {\n  var i = \"#777799\";\n  var a = \"#9999ee\";\n  if (t) {\n    i = \"#060606\";\n    a = \"#929156\";\n  }\n  var r = 0;\n  for (var e = 0; e < 80; e++) {\n    var s = r9();\n    if (s < 0.4) {\n      c0(r, 0, i, a);\n    } else if (s < 0.6) {\n      c0(r, 1, i, a);\n    } else {\n      c0(r, 2, i, a);\n    }\n    r += 10 + r9() * 30;\n  }\n  var i = \"#9999aa\";\n  var a = \"#aaaaee\";\n  if (t) {\n    i = \"#101010\";\n    a = \"#929156\";\n  }\n  var r = 0;\n  for (var e = 0; e < 80; e++) {\n    var s = r9();\n    if (s < 0.4) {\n      c0(r, 0, i, a);\n    } else if (s < 0.6) {\n      c0(r, 1, i, a);\n    } else {\n      c0(r, 2, i, a);\n    }\n    r += 10 + r9() * 30;\n  }\n}\nfunction f8(t) {\n  c8 = [];\n  for (var i = 0; i < 4; i++) {\n    m3();\n    cntx = j9.x;\n    var a = 100 + r9() * 80;\n    if (t) {\n      a = 10 + r9() * 20;\n    }\n    k4(\"rgb(\" + a + \",\" + a + \",\" + a + \")\");\n    m0(0, 30, 240, 500);\n    var r = 24,\n      e = 15,\n      s = 8,\n      n = 8,\n      h = 10;\n    var v = (col = x = y = 0);\n    for (v = 0; v < 18; v++) {\n      y = 30 + s + v * (e + h);\n      for (col = 0; col < 7; col++) {\n        x = s + col * (r + n);\n        if (t) {\n          if (r9() > 0.7) {\n            k4(\"#ffffec\");\n            m0(x, y, r, e);\n            k4(\"#bbbb88\");\n            m0(x, y + e / 2, r, e / 2);\n          } else {\n            k4(\"#112237\");\n            m0(x, y, r, e);\n            k4(\"#111a30\");\n            m0(x, y + e / 2, r, e / 2);\n          }\n        } else {\n          k4(\"#5555a7\");\n          m0(x, y, r, e);\n          k4(\"#444495\");\n          m0(x, y + e / 2, r, e / 2);\n        }\n      }\n    }\n    c8[i] = q3();\n  }\n}\nfunction c3(t) {\n  cntx = j9.x;\n  m3();\n  s3();\n  k4(\"#999999\");\n  if (t) {\n    k4(\"#555555\");\n  }\n  var i = 7;\n  m0(40, 150, i, 300);\n  k3();\n  t4(70, 150, 30, PI, -PI / 2);\n  o8(70, 150 - 30 + i);\n  t4(70, 150, 30 - i, -PI / 2, PI, true);\n  o8(70 - 30, 150);\n  s9();\n  m0(70, 150 - 30, 70, i);\n  m0(130, 150 - 30 - 1, 35, 6);\n  k4(\"#aaaaaa\");\n  if (t) {\n    k4(\"#777777\");\n  }\n  m0(40 + i - 4, 150, 2, 300);\n  m0(70, 150 - 30 + i - 4, 70, 2);\n  k3();\n  t4(70, 150, 30 - i + 4, PI, -PI / 2);\n  o8(70, 150 - 30 + i);\n  t4(70, 150, 30 - i, -PI / 2, PI, true);\n  o8(70 - 30, 150);\n  s9();\n  k4(\"#aaaaaa\");\n  if (t) {\n    k4(\"#999999\");\n  }\n  m0(40 + i - 2, 150, 2, 300);\n  m0(70, 150 - 30 + i - 2, 70, 2);\n  k3();\n  t4(70, 150, 30 - i + 2, PI, -PI / 2);\n  o8(70, 150 - 30 + i);\n  t4(70, 150, 30 - i, -PI / 2, PI, true);\n  o8(70 - 30, 150);\n  s9();\n  if (t) {\n    cntx.filter = \"blur(2px)\";\n  }\n  k4(\"#ffffff\");\n  m0(128, 150 - 30 + 4, 38, 12);\n  if (t) {\n    g1(0.8);\n    cntx.globalCompositeOperation = \"lighter\";\n    cntx.filter = \"blur(4px)\";\n    m0(123, 150 - 30 + 3, 44, 18);\n    g1(1);\n  }\n  a7 = q3();\n  a5 = q3(1);\n  n0();\n}\nfunction i0() {\n  var t = b4;\n  var i = a9;\n  cntx = e3.x;\n  var a = a6(0, 0, 0, i);\n  a.addColorStop(0, \"#00111e\");\n  a.addColorStop(1, \"#033d5e\");\n  k4(a);\n  m0(0, 0, b4, a9);\n  var r = Math.round(t + i);\n  for (var e = 0; e <= r; e++) {\n    var s = m8(t);\n    var n = m8(i);\n    var h = m8(2) + 1;\n    var v = m8(9) + 1;\n    var f = m8(9) + 1;\n    var c = m8(360);\n    if (h > 1) {\n      cntx.shadowBlur = m8(15) + 5;\n      cntx.shadowColor = \"white\";\n    }\n    k4(\"hsla(\" + c + \", 30%, 80%, .\" + v + f + \")\");\n    m0(s, n, h, h);\n  }\n}\nfunction createLeaf(t) {\n  k4(t);\n  k3();\n  t4(3, 7, 3, PI / 2, PI);\n  t4(10, 7, 10, PI, PI * 1.24);\n  t4(-4.7, 7, 10, PI * 1.76, 0);\n  t4(2.3, 7, 3, 0, PI / 2);\n  s9();\n}\nfunction j5() {\n  m3();\n  cntx = j9.x;\n  var t = j9.c;\n  cntx.save();\n  var i = a6(0, 0, 0, 8);\n  i.addColorStop(0, \"#ff111e\");\n  i.addColorStop(1, \"#aa3d5e\");\n  createLeaf(i);\n  cntx.translate(0, 20);\n  createLeaf(i);\n  cntx.translate(0, 20);\n  createLeaf(i);\n  cntx.translate(0, 20);\n  createLeaf(\"#44aa55\");\n  cntx.restore();\n  var a = 100;\n  for (var r = 0; r < 2; r++) {\n    var e = 30;\n    for (var s = 0; s < 60; s++) {\n      e += 4 + 6 * r9();\n      if (e > 780) {\n        continue;\n      }\n      var n = 20 + 4 * r9();\n      a = 100 + r * 16 - n + r9() * 12;\n      if (r9() > 0.5) {\n        k4(\"#44aa55\");\n        m0(e, a, 2, n);\n        k4(\"#66cc88\");\n        m0(e, a, 1, n);\n      } else {\n        k4(\"#449955\");\n        m0(e, a, 2, n);\n        k4(\"#66aa88\");\n        m0(e, a, 1, n);\n      }\n      var h = m8(2) * 20;\n      var v = e - 2;\n      var f = a - 6;\n      s3();\n      j4(v + 3, f);\n      p9(0.3);\n      i5(t, 0, h, 6, 11, 0, 0, 6, 11);\n      n0();\n      s3();\n      j4(v - 3, f + 1);\n      p9(-0.3);\n      i5(t, 0, h, 6, 11, 0, 0, 6, 11);\n      n0();\n      s3();\n      j4(v, f);\n      i5(t, 0, h, 6, 11, 0, 0, 6, 11);\n      n0();\n      s3();\n      j4(v + 6, f + 10);\n      p9(0.6);\n      i5(t, 0, 60, 6, 11, 0, 0, 6, 11);\n      n0();\n    }\n  }\n  cntx.clearRect(0, 0, 22, 300);\n  e8 = q3();\n}\nfunction o7(t, i) {\n  k3();\n  k4(i);\n  p0(t[0], t[1]);\n  for (var a = 2; a < t.length; a += 2) {\n    o8(t[a], t[a + 1]);\n  }\n  k0();\n  s9();\n}\nfunction drawLine(t, i, a, r) {\n  k3();\n  p0(t, i);\n  o8(a, r);\n  cntx.stroke();\n}\nfunction r1() {\n  m3();\n  cntx = j9.x;\n  var t = [8, 194, 11, 206, 14, 214, 18, 216, 41, 215, 46, 213, 47, 205];\n  o7(t, r4);\n  var t = [227, 193, 230, 200, 241, 204, 258, 203, 265, 197, 268, 191];\n  o7(t, r4);\n  var t = [\n    5, 192, 25, 206, 296, 190, 302, 164, 298, 149, 296, 145, 292, 111, 289, 103,\n    294, 101, 294, 91, 297, 84, 263, 72, 208, 14, 167, 2, 66, 3, 45, 7, 8, 55,\n    5, 65, 7, 88, 2, 97, 1, 151,\n  ];\n  o7(t, \"#a9fb78\");\n  var t = [\n    25, 206, 296, 190, 302, 164, 298, 149, 296, 145, 292, 111, 289, 103, 294,\n    101, 294, 91, 297, 84, 17, 93, 22, 122, 20, 162, 20, 170, 2, 145, 3, 160, 6,\n    187,\n  ];\n  o7(t, \"#4abf74\");\n  var t = [20, 108, 294, 96, 296, 89, 19, 98];\n  o7(t, \"#226d7d\");\n  var t = [21, 162, 296, 149, 292, 112, 22, 122];\n  o7(t, \"#226d7d\");\n  var t = [42, 86, 260, 79, 208, 21, 60, 24];\n  var i = a6(0, 19, 0, 90);\n  i.addColorStop(0, \"#4fa8f7\");\n  i.addColorStop(1, \"#2d3c7c\");\n  o7(t, i);\n  t = [51, 62, 238, 57, 253, 76, 196, 67, 159, 64, 125, 66, 81, 72, 45, 82];\n  o7(t, \"#95eef7\");\n  var t = [27, 83, 33, 77, 46, 27, 21, 70];\n  o7(t, \"#4773dd\");\n  var t = [19, 61, 46, 17, 43, 12, 19, 51];\n  o7(t, \"#4773dd\");\n  var t = [3, 99, 10, 113, 18, 120, 17, 106, 11, 86, 5, 91];\n  o7(t, \"#ffd47e\");\n  var t = [21, 127, 19, 145, 20, 158, 106, 153, 105, 124];\n  o7(t, \"#b44258\");\n  var t = [20, 158, 106, 153, 105, 142, 19, 146];\n  o7(t, \"#5d2959\");\n  var t = [217, 120, 218, 149, 296, 145, 296, 134, 293, 116];\n  o7(t, \"#b44258\");\n  var t = [218, 149, 296, 145, 296, 133, 218, 137];\n  o7(t, \"#5d2959\");\n  var t = [21, 173, 300, 159, 299, 149, 21, 162];\n  o7(t, \"#a9fb78\");\n  f1 = q3(0);\n  d3 = q3(1);\n}\nfunction p6() {\n  m3();\n  cntx = j9.x;\n  var t = j9.c;\n  var i = [5, 197, 143, 197, 141, 87, 1, 87, 4, 106, 1, 121, 1, 180];\n  o7(i, \"#4abf74\");\n  var i = [141, 87, 143, 1, 87, 3, 72, 6, 61, 17, 31, 67, 1, 87];\n  o7(i, \"#a9fb78\");\n  i = [4, 100, 143, 100, 143, 93, 3, 93];\n  o7(i, \"#226d7d\");\n  i = [4, 155, 143, 155, 143, 113, 4, 113];\n  o7(i, \"#226d7d\");\n  i = [4, 150, 86, 149, 86, 121, 5, 121, 3, 139];\n  o7(i, \"#b44258\");\n  i = [4, 149, 86, 149, 86, 138, 4, 138];\n  o7(i, \"#5d2959\");\n  i = [22, 131, 22, 134, 73, 134, 73, 131];\n  o7(i, \"#d65d5b\");\n  i = [32, 82, 143, 82, 143, 19, 66, 19];\n  var a = a6(0, 19, 0, 90);\n  a.addColorStop(0, \"#4fa8f7\");\n  a.addColorStop(1, \"#2d3c7c\");\n  o7(i, a);\n  i = [47, 59, 143, 59, 143, 64, 78, 68, 38, 77];\n  o7(i, \"#95eef7\");\n  i = [13, 197, 16, 205, 23, 208, 49, 207, 56, 202, 58, 197];\n  o7(i, r4);\n  var i = [1, 155, 1, 167, 143, 167, 143, 155];\n  o7(i, \"#a9fb78\");\n  s3();\n  cntx.scale(-1, 1);\n  i5(j9.c, 0, 0, 143, 210, -143 - 132, 0, 143, 210);\n  n0();\n  b7 = q3(0);\n}\nfunction o6() {\n  r1();\n  p6();\n}\nfunction b2(t, i) {\n  return (t % i) / i;\n}\nfunction g4(t, i, a) {\n  return t + (i - t) * a;\n}\nfunction l0(t, i, a) {\n  var r = t + i;\n  while (r >= a) r -= a;\n  while (r < 0) r += a;\n  return r;\n}\nvar m5 = function (t, i) {\n  this.canvas = t;\n  this.t6 = i;\n};\nm5.prototype = {\n  init: function () {\n    v0.reset();\n    v3.buildv20();\n  },\n  keyDown: function (t) {\n    if (t.keyCode === 88) {\n      startGame();\n    }\n  },\n  keyUp: function (t) {},\n  p5: function () {\n    n3 = true;\n    var t = height;\n    v0.y = 400;\n    v0.depth = 0.83909963117728;\n    v0.x = 0;\n    var i = v3.n1(v0.z);\n    var a = b2(v0.z, v2.u0Length);\n    v0.y = 500 + g4(i.p1.v8.y, i.p3.v8.y, a);\n    var r, e, s, n, h, v, f, c;\n    var u = 0;\n    for (r = 0; r < v0.l3; r++) {\n      s = v3.o9((i.index + r) % v3.o9Count());\n      s.u9 = s.index < i.index;\n      s.clip = t;\n      s.clip = 0;\n      v0.t2(s.p1, 0, s.u9, width, height, q4);\n      v0.t2(s.p2, 0, s.u9, width, height, q4);\n      v0.t2(s.p3, 0, s.u9, width, height, q4);\n      v0.t2(s.p4, 0, s.u9, width, height, q4);\n      if (s.p1.v0.z <= v0.depth || s.p3.u6.y >= s.p1.u6.y || s.p3.u6.y >= t)\n        continue;\n      k2(s);\n      t = s.p1.u6.y;\n    }\n  },\n  render: function (t) {\n    cntx = this.t6;\n    var i = l2();\n    k4(r4);\n    m0(0, 0, this.canvas.width, this.canvas.height);\n    for (var a = 0; a < 30; a++) {\n      var r = 100 + a * 10;\n      t6.font = \"italic \" + r + \"px \" + q6;\n      t6.fontStyle = \"italic\";\n      var e = 80 + a * 4;\n      e = (e + i / 6) % 200;\n      if (a == 29) {\n        e = 255;\n      }\n      k4(\"rgb(\" + e + \",\" + e + \",\" + e + \")\");\n      k9(\"vrace\", 350 - a * 11, 300 - a);\n    }\n    t6.font = \"44px \" + q6;\n    k9(\"Arrow keys to drive, x for Turbo, z for Handbrake\", 38, 570);\n    k9(\"x To Start\", 423, 460);\n    v0.z = l0(v0.z, t * 120, v3.r2());\n    this.p5();\n  },\n};\nvar u3 = function () {\n  this.fieldOfView = 100;\n  this.y = 0;\n  this.z = 0;\n  this.l3 = 300;\n  this.depth = 0;\n  this.fogDensity = 25;\n  this.t7 = 0;\n  this.t9 = 740;\n  this.t7 = 700;\n};\nu3.prototype = {\n  reset: function () {\n    this.depth = 1 / Math.tan(((this.fieldOfView / 2) * Math.PI) / 180);\n    this.t9 = 740;\n    this.t7 = 700;\n  },\n  t2: function (t, i, a, r, e) {\n    var s = this.z;\n    if (a) {\n      s -= v3.r2();\n    }\n    var n = this.x + i;\n    t.v0.x = (t.v8.x || 0) - n;\n    t.v0.y = (t.v8.y || 0) - this.y;\n    t.v0.z = (t.v8.z || 0) - s;\n    t.u6.scale = this.depth / t.v0.z;\n    t.u6.x = Math.round(r / 2 + (t.u6.scale * t.v0.x * r) / 2);\n    t.u6.y = Math.round(e / 2 - (t.u6.scale * t.v0.y * e) / 2);\n  },\n  update: function (t) {\n    this.z = cars[0].z - this.t7;\n    if (this.z < 0) {\n      this.z += v3.r2();\n    }\n    v0.x = cars[0].x + cars[0].width / 2;\n    var i = v3.n1(cars[0].z);\n    var a = b2(cars[0].z, v2.u0Length);\n    this.y = this.t9 + g4(i.p1.v8.y, i.p3.v8.y, a);\n  },\n};\nvar width = 1024;\nvar height = 768;\nvar resolution = height / 480;\nvar i2 = 0.001;\nvar i3 = 0.002;\nvar i4 = 0.003;\nvar h3 = 0;\nvar h4 = 0;\nvar h6 = 0;\nvar n3 = false;\nvar lastDriftDraw = 0;\nfunction j6(t, i, a, r, e, s, n, h, v) {\n  var f = t6;\n  k4(v);\n  k3();\n  p0(t, i);\n  o8(a, r);\n  o8(e, s);\n  o8(n, h);\n  k0();\n  if (n3) {\n    g0(q2);\n    p2();\n  } else {\n    s9();\n  }\n}\nfunction k2(t) {\n  var i, a, r, e, s;\n  var n = Math.floor(t.index / 2) % 2;\n  var h = e4;\n  var v = d4;\n  if (n) {\n    h = g2;\n    v = g3;\n  }\n  if (!n3) {\n    k4(v);\n    m0(0, t.p3.u6.y, width, t.p1.u6.y - t.p3.u6.y);\n  }\n  var f = (t.r0 * t.p1.u6.scale * width) / 2;\n  var c = (t.r0 * t.p4.u6.scale * width) / 2;\n  j6(\n    t.p1.u6.x - f,\n    t.p1.u6.y,\n    t.p1.u6.x,\n    t.p1.u6.y,\n    t.p4.u6.x,\n    t.p4.u6.y,\n    t.p4.u6.x - c,\n    t.p4.u6.y,\n    h\n  );\n  j6(\n    t.p2.u6.x,\n    t.p2.u6.y,\n    t.p2.u6.x + f,\n    t.p2.u6.y,\n    t.p3.u6.x + c,\n    t.p3.u6.y,\n    t.p3.u6.x,\n    t.p3.u6.y,\n    h\n  );\n  if (!n3) {\n    var u = n9;\n    if (t.index == 0) {\n      u = q2;\n    }\n    j6(\n      t.p1.u6.x,\n      t.p1.u6.y,\n      t.p2.u6.x,\n      t.p2.u6.y,\n      t.p3.u6.x,\n      t.p3.u6.y,\n      t.p4.u6.x,\n      t.p4.u6.y,\n      u\n    );\n  }\n  var o = (50 * t.p1.u6.scale * width) / 2;\n  var l = (50 * t.p4.u6.scale * width) / 2;\n  r = t.p1.u6.x + (100 * t.p1.u6.scale * width) / 2;\n  e = t.p4.u6.x + (100 * t.p4.u6.scale * width) / 2;\n  j6(\n    r - o / 2,\n    t.p1.u6.y,\n    r + o / 2,\n    t.p1.u6.y,\n    e + l / 2,\n    t.p3.u6.y,\n    e - l / 2,\n    t.p3.u6.y,\n    c6\n  );\n  r = t.p2.u6.x - (100 * t.p1.u6.scale * width) / 2;\n  e = t.p3.u6.x - (100 * t.p4.u6.scale * width) / 2;\n  j6(\n    r - o / 2,\n    t.p1.u6.y,\n    r + o / 2,\n    t.p1.u6.y,\n    e + l / 2,\n    t.p3.u6.y,\n    e - l / 2,\n    t.p3.u6.y,\n    c6\n  );\n  lanes = 2;\n  if (n) {\n    i = (t.p2.u6.x - t.p1.u6.x) / lanes;\n    a = (t.p3.u6.x - t.p4.u6.x) / lanes;\n    r = t.p1.u6.x + i;\n    e = t.p4.u6.x + a;\n    for (s = 1; s < lanes; r += i, e += a, s++) {\n      j6(\n        r - o / 2,\n        t.p1.u6.y,\n        r + o / 2,\n        t.p1.u6.y,\n        e + l / 2,\n        t.p3.u6.y,\n        e - l / 2,\n        t.p3.u6.y,\n        c6\n      );\n    }\n  }\n  if (q1 != 0) {\n    q9(0, t.p1.u6.y, width, t.p3.u6.y - t.p1.u6.y, t.fog);\n  }\n}\nfunction e0(t, i, a, r, e) {\n  r = r || 0;\n  e = e || 0;\n  var s = b4 / 2;\n  var n = a9;\n  var h = Math.floor(b4 * r);\n  var v = 0;\n  var f = Math.min(s, b4 - h);\n  var c = n;\n  var u = 0;\n  var o = e;\n  var l = Math.floor(i * (f / s));\n  var d = a;\n  t6.drawImage(t.c, h, v, f, c, u, o, l, d);\n  if (f < s) t6.drawImage(t.c, 0, v, s - f, c, l - 1, o, i - l, d);\n}\nfunction m1(t, i, a, r, e, s) {\n  var n = (t.w * i * width) / 2;\n  var h = (t.h * i * width) / 2;\n  r = r - h;\n  var v = e ? Math.max(0, r + h - e) : 0;\n  if (v < h) {\n    t6.drawImage(j8, t.x, t.y, t.w, t.h - (t.h * v) / h, a, r, n, h - v);\n    if (s !== false && q1 != 0) {\n      q9(a, r, n, h, s);\n    }\n  }\n}\nfunction b3(t, i) {\n  return 1 / Math.pow(Math.E, t * t * i);\n}\nfunction m2(t, i, a, r, e, s) {\n  var n;\n  if (r < 0) {\n    n = f1;\n  } else if (r > 0) {\n    n = d3;\n  } else {\n    n = b7;\n  }\n  var h = (u1.width * t) / n.w;\n  var v, f;\n  if (u1.h2 > 0 || u1.p8 > 0) {\n    cars[0].b6();\n    var c = 0;\n    if (u1.h2 <= 0) {\n      c = u1.p8;\n      while (c > 1) {\n        c -= 1;\n      }\n    }\n    g1(1 - c);\n    for (v = 0; v < cars[0].f2.length; v++) {\n      var u = cars[0].f2[v];\n      k3();\n      p0(u[0].u6.x, u[0].u6.y);\n      for (f = 1; f < u.length; f++) {\n        o8(u[f].u6.x, u[f].u6.y);\n      }\n      k4(q2);\n      s9();\n    }\n    g1(1);\n  }\n  m1(n, h, i, a + u1.u8, false);\n  if (u1.m6 > 0) {\n    var o = l2();\n    if (o - lastDriftDraw > 100) {\n      g1(0.8);\n      k4(q2);\n      var l = i + 12;\n      var d = a - 4;\n      m0(l, d, 50, 10);\n      l = i + 260;\n      m0(l, d, 50, 10);\n      g1(1);\n      lastDriftDraw = o;\n    }\n  }\n  if (u1.v5) {\n    var p = i + 82;\n    var x = a - 10;\n    e6(p, x, 10, \"#dd9925\");\n    e6(p, x, 5, \"#cccc55\");\n    p = i + 230;\n    e6(p, x, 10, \"#dd9925\");\n    e6(p, x, 5, \"#cccc55\");\n  }\n}\nfunction q9(t, i, a, r, e) {\n  if (e < 1) {\n    g1(1 - e);\n    k4(q1);\n    m0(t, i, a, r);\n    g1(1);\n  }\n}\nfunction l7() {\n  cntx = t6;\n  var t = v3.n1(v0.z);\n  var i = b2(v0.z, v2.u0Length);\n  var a = v3.n1(u1.z);\n  var r = b2(u1.z, v2.u0Length);\n  var e = g4(a.p1.v8.y, a.p3.v8.y, r);\n  var s = height;\n  var n = 0;\n  var h = -(t.v4 * i);\n  t6.fillStyle = \"#4576aa\";\n  m0(0, 0, width, height);\n  e0(e3, width, height, h3, resolution * i2 * e);\n  e0(e2, width, height, h4, resolution * i3 * e);\n  e0(e1, width, height, h6, resolution * i4 * e);\n  var v, f, c, u, o, l, d, p;\n  for (v = 0; v < v0.l3; v++) {\n    c = v3.o9((t.index + v) % v3.o9Count());\n    c.u9 = c.index < t.index;\n    c.fog = b3(v / v0.l3, v0.fogDensity);\n    c.clip = s;\n    v0.t2(c.p1, -n, c.u9, width, height);\n    v0.t2(c.p2, -n, c.u9, width, height);\n    v0.t2(c.p3, -n - h, c.u9, width, height);\n    v0.t2(c.p4, -n - h, c.u9, width, height);\n    n = n + h;\n    h = h + c.v4;\n    if (c.p1.v0.z <= v0.depth || c.p3.u6.y >= c.p1.u6.y || c.p3.u6.y >= s)\n      continue;\n    k2(c);\n    s = c.p1.u6.y;\n  }\n  for (v = v0.l3 - 1; v > 0; v--) {\n    c = v3.o9((t.index + v) % v3.o9Count());\n    for (f = 0; f < c.cars.length; f++) {\n      u = c.cars[f];\n      if (u.index !== 0) {\n        o = u.sprite;\n        var x = g4(c.p1.u6.scale, c.p3.u6.scale, u.percent);\n        d =\n          g4(\n            (c.p1.u6.x + c.p2.u6.x) / 2,\n            (c.p3.u6.x + c.p4.u6.x) / 2,\n            u.percent\n          ) +\n          (x * u.x * width) / 2;\n        p = g4(c.p1.u6.y, c.p4.u6.y, u.percent);\n        var o = b7;\n        l = (u.width * x) / o.w;\n        if (u.s4) {\n          o = f1;\n        } else if (u.q8) {\n          o = d3;\n        }\n        m1(o, l, d, p, c.clip, c.fog);\n      }\n    }\n    for (f = 0; f < c.t1.length; f++) {\n      o = c.t1[f];\n      l = c.p1.u6.scale;\n      d =\n        c.p1.u6.x -\n        (c.p1.v8.x * c.p1.u6.scale * width) / 2 +\n        (l * o.x * width) / 2;\n      p = c.p1.u6.y;\n      l = o.s * l;\n      m1(o.u5, l, d, p, c.clip, false);\n      var g = (o.u5.w * l * width) / 2;\n      var m = -0;\n      var w = d + g * (m || 0);\n      l = c.p1.u6.scale;\n      l = o.s * l;\n      var k = (o.u5.cx * l * width) / 2;\n      var y = (o.u5.cw * l * width) / 2;\n      d = w + k;\n    }\n    if (c == a) {\n      var b = g4(a.p1.u6.y, a.p3.u6.y, r);\n      b =\n        height / 2 -\n        ((v0.depth / v0.t7) * g4(a.p1.v0.y, a.p3.v0.y, r) * height) / 2;\n      var q = b;\n      if (cars[0].t9 > 0) {\n        b -= (((cars[0].t9 * v0.depth) / v0.t7) * height) / 2;\n      }\n      var z = width / 2;\n      var x = g4(a.p1.u6.scale, a.p3.u6.scale, r);\n      d =\n        g4((a.p1.u6.x + a.p2.u6.x) / 2, (a.p3.u6.x + a.p4.u6.x) / 2, r) +\n        (x * cars[0].x * width) / 2;\n      var I = { v8: { x: u1.x, y: u1.y, z: u1.z }, v0: {}, u6: {} };\n      v0.t2(I, 0, a.index < t.index, width, height);\n      z = I.u6.x;\n      var j = 0;\n      if (u1.v7 > 0) {\n        if (u1.h8 != 0) {\n          j = u1.h8;\n        } else {\n          j = u1.s4 ? -1 : u1.q8 ? 1 : 0;\n        }\n      }\n      m2(v0.depth / v0.t7, z, b, j, a.p3.v8.y - a.p1.v8.y, q);\n      if (race.state == 4) {\n        t6.drawImage(v3.m7, -40, 200, 400, 400);\n      }\n    }\n  }\n}\nvar Car = function () {\n  var t = this;\n  t.sprite = 0;\n  t.index = 0;\n  t.width = 500;\n  t.height = 0;\n  t.x = 0;\n  t.y = 0;\n  t.lastY = false;\n  t.t9 = 0;\n  t.z = 0;\n  t.lap = 0;\n  t.lapStarted = false;\n  t.position = 0;\n  t.n4 = 0.3;\n  t.f2 = [];\n  t.c7 = false;\n  t.p8 = 0;\n  t.h2 = 0;\n  t.percent = 0;\n  t.v7 = 0;\n  t.v1 = 0;\n  t.v5StartTime = 0;\n  t.q0 = t.brake = t.s4 = t.q8 = t.v5 = t.l5 = t.l8 = false;\n  t.m6 = 0;\n  t.h8 = 0;\n  t.o1 = 100;\n  t.lapStarted = false;\n  t.n4 = 0.3;\n  t.r6 = 26e3;\n  t.i8 = 28e3;\n  t.v7Percent = 0;\n  t.accel = 6800;\n  t.r8 = -16e3;\n  t.decel = -8e3;\n  t.h5 = 0;\n  t.lastLapTime = null;\n  t.position = 0;\n  t.r3 = 3e3;\n  t.slowOnCorners = false;\n  t.c5 = false;\n  t.u8 = 1.5;\n  t.g5 = 0;\n};\nCar.prototype = {\n  k7: function (t, i, a) {\n    return t + i * a;\n  },\n  b6: function () {\n    this.f2 = [];\n    var t = 400;\n    var i = this.z + 500;\n    var a = t - 40;\n    var r = 700;\n    var e, s;\n    var n = 20;\n    var h = 0;\n    if (this.c7 === false) {\n      this.c7 = [];\n      for (e = 0; e < n; e++) {\n        this.c7.push(r9());\n      }\n    }\n    for (e = 0; e < n; e++) {\n      this.c7[e] += 0.03;\n      if (this.c7[e] >= 0.8) {\n        this.c7[e] = 0;\n      }\n      var v = t + 60;\n      if (h > PI / 6 && h < PI / 2) {\n        v = t + 60 + (h - PI / 6) * 128;\n      }\n      if (h >= PI / 2 && h < (5 * PI) / 6) {\n        v = t + 60 + ((5 * PI) / 6 - h) * 128;\n      }\n      var f = this.x + this.width / 2 + a * Math.cos(h - 0.05);\n      var c = this.y + a * sin(h - 0.02);\n      var u = this.x + this.width / 2 + a * Math.cos(h + 0.05);\n      var o = this.y + a * sin(h + 0.02);\n      var l = this.x + this.width / 2 + v * Math.cos(h - 0.05);\n      var d = this.y + v * sin(h - 0.05);\n      var p = this.x + this.width / 2 + v * Math.cos(h + 0.05);\n      var x = this.y + v * sin(h + 0.05);\n      var g = f + (l - f) * this.c7[e];\n      var m = u + (p - u) * this.c7[e];\n      var w = c + (d - c) * this.c7[e];\n      var k = o + (x - o) * this.c7[e];\n      var y = f + (l - f) * (this.c7[e] + 0.4);\n      var b = u + (p - u) * (this.c7[e] + 0.4);\n      var q = c + (d - c) * (this.c7[e] + 0.4);\n      var z = o + (x - o) * (this.c7[e] + 0.4);\n      var I = i - r * this.c7[e];\n      var j = i - r * (this.c7[e] + 0.4);\n      var T = [];\n      T.push({ v8: { x: g, y: w, z: I }, v0: {}, u6: {} });\n      T.push({ v8: { x: m, y: k, z: I }, v0: {}, u6: {} });\n      T.push({ v8: { x: b, y: z, z: j }, v0: {}, u6: {} });\n      T.push({ v8: { x: y, y: q, z: j }, v0: {}, u6: {} });\n      this.f2.push(T);\n      h += PI / n;\n    }\n    for (e = 0; e < this.f2.length; e++) {\n      var M = this.f2[e];\n      for (s = 0; s < M.length; s++) {\n        v0.t2(M[s], 0, 0, width, height);\n      }\n    }\n  },\n  limit: function (t, i, a) {\n    return Math.max(i, Math.min(t, a));\n  },\n  t0: function (t, i, a, r, e) {\n    var s = t - ((e - 1) * i) / 2;\n    var n = t + i * e;\n    var h = a - ((e - 1) * r) / 2;\n    var v = a + r * e;\n    return !(n < h || s > v);\n  },\n  setTurnLeft: function (t) {\n    this.s4 = t;\n  },\n  k8: function (t) {\n    this.q8 = t;\n  },\n  j0: function (t) {\n    this.q0 = t;\n  },\n  r5: function (t) {\n    this.brake = t;\n  },\n  s2: function (t) {\n    this.l5 = t;\n  },\n  setDrift: function (t) {\n    this.l8 = t;\n  },\n  d2: function () {\n    return this.h5;\n  },\n  getLap: function () {\n    if (this.lap < 1) {\n      return 1;\n    }\n    return this.lap;\n  },\n  n2: function () {\n    var t = this.position,\n      i = t % 10,\n      a = t % 100;\n    if (i == 1 && a != 11) {\n      return t + \"st\";\n    }\n    if (i == 2 && a != 12) {\n      return t + \"nd\";\n    }\n    if (i == 3 && a != 13) {\n      return t + \"rd\";\n    }\n    return t + \"th\";\n  },\n  r7: function () {\n    return this.v7;\n  },\n  update: function (t) {\n    var i = this.r6;\n    this.v7Percent = this.v7 / this.r6;\n    var a = v3.n1(this.z);\n    var r = v3.n1(cars[0].z);\n    var e = this.v7Percent;\n    this.percent = b2(this.z, v2.u0Length);\n    var s = t * this.r3 * e;\n    var n = a.p1.v8.x;\n    var h = a.p2.v8.x;\n    var v = this.x;\n    var f = this.x + this.width;\n    var c = v - n;\n    var u = h - f;\n    var o = h - n;\n    var l = 1;\n    if (a.v4 < 0 && c > 0) {\n      if (this.index == 0) {\n        l = 1 + ((o - this.width - c) * -a.v4) / (o * 80);\n      }\n    } else if (a.v4 > 0 && u > 0) {\n      if (this.index == 0) {\n        l = 1 + ((o - this.width - u) * a.v4) / (o * 80);\n      }\n    }\n    if (l < 1) {\n      l = 1;\n    }\n    var d = 0.8;\n    var p = 1;\n    if (this.h2 > 0) {\n      d += 0.4;\n    }\n    if (this.l8) {\n      if (this.v7 > 8e3) {\n        if (!this.v6 && !this.q0) {\n          this.m6 = 1.2;\n          this.v6 = true;\n        }\n      } else {\n        d -= 0.5;\n        this.v6 = false;\n      }\n    } else {\n      this.v6 = false;\n    }\n    if (this.m6 > 0 && this.v7 > 8e3) {\n      this.m6 -= t;\n      d -= 0.04;\n      if (this.h8 == 0) {\n        if (this.s4) {\n          this.h8 = -1;\n        }\n        if (this.q8) {\n          this.h8 = 1;\n        }\n      }\n    } else {\n      this.v6 = false;\n      this.m6 = 0;\n      this.h8 = 0;\n    }\n    var x = this.v5;\n    if (this.l5) {\n      this.v5 = this.o1 > 0 && this.v7 > 8e3 && this.q0;\n    } else {\n      this.v5 = false;\n    }\n    if (this.v5) {\n      p = 1.2;\n      i = this.i8;\n    }\n    this.u8 = 3.4;\n    if (c < -this.width * 0.1 || u < -this.width * 0.1) {\n      if (c + this.width * 0.1 < -r.r0 || u + this.width * 0.1 < -r.r0) {\n        this.u8 = 9.5;\n        d -= 0.6;\n        p -= 0.2;\n      } else {\n        d -= 0.1;\n        this.u8 = 6;\n      }\n    }\n    this.u8 = this.u8 * r9() * e;\n    if (this.index == 0 && race.state != 5) {\n      this.x = this.x - s * e * r.v4 * this.n4;\n      if (this.h8 != 0) {\n        s = s * 0.5;\n      }\n      if (this.s4) this.x = this.x - s;\n      else if (this.q8) this.x = this.x + s;\n      var g = this.h8 * this.v7 * 55e-5;\n      this.x += g;\n      this.z = l0(this.z, t * this.v7 * l, v3.r2());\n      this.y = g4(a.p1.v8.y, a.p3.v8.y, this.percent);\n      this.t9 = 0;\n      if (this.q0) {\n        if (this.v5) {\n          var m = l2();\n          if (!x) {\n            this.v5StartTime = m;\n          }\n          this.o1 -= t * 2.45;\n          b0(m - this.v5StartTime);\n        }\n        if (this.v7 < i * d) {\n          this.v7 = this.k7(this.v7, this.accel * p, t);\n        } else {\n          this.v7 = this.k7(this.v7, this.decel, t);\n          if (this.v7 < i * d) {\n            this.v7 = i * d;\n          }\n        }\n      } else if (this.brake) {\n        this.v7 = this.k7(this.v7, this.r8, t);\n      } else {\n        this.v7 = this.k7(this.v7, this.decel, t);\n      }\n      for (var w = 0; w < r.t1.length; w++) {\n        var k = r.t1[w];\n        var y = k.s * k.u5.cw;\n        var b = k.x + k.u5.cx * k.s;\n        var q = this.x;\n        if (this.t0(q, this.width, b, y, 1)) {\n          if (this.index == 0) {\n            g8();\n            this.p8 = 0;\n            this.h2 = 0;\n          }\n          this.v7 = i / 5;\n          this.z = l0(r.p1.v8.z, 0, v3.r2());\n          break;\n        }\n      }\n      var z = false;\n      for (var I = 0; I < cars.length; I++) {\n        var j = cars[I].z - u1.z;\n        if (u1.z > v3.r2() - 1200) {\n          j -= v3.r2();\n        }\n        if (j > 0 && j < 1800) {\n          var T = (u1.x - cars[I].x) / cars[I].width;\n          if (T < 0) {\n            T = -T;\n          }\n          if (T < 0.4) {\n            z = true;\n          }\n        }\n      }\n      if (z && this.v7 > 8e3) {\n        this.p8 += t * 1;\n        if (this.p8 > 0.14) {\n          this.h2 = 2;\n        }\n      } else {\n        this.p8 = 0;\n      }\n      if (this.h2 > 0) {\n        this.h2 -= t;\n      }\n    } else {\n      if (this.v7 < i) {\n        this.v7 = this.k7(this.v7, this.accel, t);\n      }\n      var M = this.d1(a, r, u1.width);\n      var C = this.x + M * s;\n      if (a.v4 == 0) {\n        this.s4 = M == -1;\n        this.q8 = M == 1;\n      } else {\n        this.s4 = a.v4 < -0.5;\n        this.q8 = a.v4 > 0.5;\n      }\n      if (C + this.width < h * 0.6 && C > n * 0.8) {\n        this.x = C;\n      }\n      this.z = l0(this.z, t * this.v7, v3.r2());\n    }\n    this.percent = b2(this.z, v2.u0Length);\n    var L = v3.n1(this.z);\n    if (this.index === 0) {\n      for (w = 0; w < L.cars.length; w++) {\n        var P = L.cars[w];\n        if (P.index != this.index) {\n          if (this.v7 > P.v7) {\n            if (this.t0(this.x, this.width, P.x, P.width, 1)) {\n              if (this.index !== 0) {\n                this.v7 = P.v7 / 2;\n                if (P.index !== 0) {\n                  P.v7 = P.v7 * 1.2;\n                }\n              } else {\n                if (this.index == 0) {\n                  g8();\n                  this.p8 = 0;\n                  this.h2 = 0;\n                }\n                this.v7 = P.v7;\n                this.z = P.z - 100;\n              }\n              break;\n            }\n          }\n        }\n      }\n    }\n    if (this.x + this.width / 2 < n - 1.2 * this.width) {\n      this.x = n - 1.2 * this.width - this.width / 2;\n    }\n    if (this.x + this.width / 2 > h + 1.2 * this.width) {\n      this.x = h + 1.2 * this.width - this.width / 2;\n    }\n    this.v7 = this.limit(this.v7, 0, i);\n    if (this.index == 0) {\n      b5(this.v7Percent);\n    }\n    if (a != L) {\n      var S = a.cars.indexOf(this);\n      a.cars.splice(S, 1);\n      L.cars.push(this);\n    }\n    if (this.z < v2.u0Length * 1.2 && !this.lapStarted) {\n      this.lap++;\n      this.lapStarted = true;\n      this.lastLapTime = this.h5;\n      if (this.lap == 2 && this.index == 0) {\n        speak(\"lap time \" + this.d2().toFixed(2));\n      }\n      this.h5 = 0;\n    } else {\n      if (this.z > v2.u0Length * 1.2) {\n        this.lapStarted = false;\n      }\n      this.h5 += t;\n    }\n    var R = this.position;\n    this.position = 1;\n    for (var I = 0; I < cars.length; I++) {\n      if (I != this.index) {\n        if (cars[I].lap > this.lap) {\n          this.position++;\n        } else if (cars[I].lap === this.lap) {\n          if (cars[I].z > this.z) {\n            this.position++;\n          }\n        }\n      }\n    }\n    if (this.index == 0) {\n      if (this.e7 > 0) {\n        this.e7 -= t;\n      }\n      if (this.position !== R) {\n        this.newPosition = this.n2();\n        this.e7 = 1;\n      }\n    }\n    if (this.index === 0 && this.lap === 3 && race.state != 5) {\n      this.g5 = this.n2();\n      speak(\"Race. Over.\");\n      speak(this.g5 + \" Place\");\n      this.v5 = false;\n      this.p8 = 0;\n      this.h2 = 0;\n      race.raceOver();\n    }\n  },\n  d1: function (t, i, a) {\n    var r = 60;\n    var e = null;\n    var s = v3.o9Count();\n    for (var h = 1; h < r; h++) {\n      e = v3.o9((t.index + h) % s);\n      var v = e.p1.v8.x;\n      var f = e.p2.v8.x;\n      var c = 0;\n      if (h < 8) {\n        for (n = 0; n < e.cars.length; n++) {\n          var u = e.cars[n];\n          var o = u.x;\n          var l = u.width;\n          var d = u.x + u.width;\n          if (f - d < this.width * 1.4) {\n            c = -1;\n          } else if (o - v < this.width * 1.4) {\n            c = 1;\n          } else {\n            if (o - v > f - d) {\n              c = -1;\n            } else {\n              c = 1;\n            }\n          }\n          return (c * 3) / h;\n        }\n      }\n    }\n    if (this.c5) {\n      for (var h = 1; h < r; h++) {\n        e = v3.o9((t.index + h) % s);\n        var v = e.p1.v8.x;\n        var f = e.p2.v8.x;\n        if (e.v4 > 0) {\n          if (h < 5) {\n            return 1 / 5;\n          }\n          return 2 / h;\n        }\n        if (e.v4 < 0) {\n          if (h < 5) {\n            return -1 / 5;\n          }\n          return 2 / h;\n        }\n      }\n    }\n    return 0;\n  },\n};\nvar e4 = \"#a02222\",\n  g2 = \"#BBBBBB\",\n  d4 = \"#000000\",\n  g3 = \"#000000\",\n  n9 = \"#000000\";\nvar v2 = function () {\n  this.v3Length = 0;\n  this.l4 = 0;\n  this.u0s = [];\n  this.map = null;\n};\nvar q4 = 1200;\nv2.u0Length = 300;\nvar lanes = 1;\nv2.prototype = {\n  buildv20: function () {\n    q1 = 0;\n    this.u0s = [];\n    this.m9(200);\n    this.e9();\n  },\n  createStreetLights: function () {\n    var t = this.o9Count();\n    for (var i = 0; i < t; i++) {\n      var a = this.u0s[i];\n      if (i % 20 == 0) {\n        var r = a.p1.v8.x;\n        a.t1.push({ u5: a7, s: 12, x: r - 12 * a7.w + 700 });\n        var r = a.p2.v8.x;\n        a.t1.push({ u5: a5, s: 12, x: r - 700 });\n      }\n    }\n  },\n  createRoadsideObjects: function (t, i, a, r, e) {\n    var s = this.o9Count();\n    var n = 0;\n    for (var h = 0; h < s; h++) {\n      var v = this.u0s[h];\n      var f = r9();\n      if (v.v4 != 0 && e) {\n        if (n % 20 == 0) {\n          if (v.v4 > 0) {\n            var c = v.p1.v8.x;\n            v.t1.push({ u5: d0, s: 3, x: c - 3 * d0.w - 400 });\n          } else {\n            var c = v.p2.v8.x;\n            v.t1.push({ u5: d8, s: 3, x: c + 400 });\n          }\n        }\n        n++;\n      } else {\n        n = 0;\n        var u = t[m8(t.length)];\n        if (f > i) {\n          var c = v.p1.v8.x;\n          v.t1.push({ u5: u, s: a, x: c - (a * u.w) / 2 - r });\n          var c = v.p2.v8.x;\n          v.t1.push({ u5: u, s: a, x: c - (a * u.w) / 2 + r });\n        }\n      }\n    }\n  },\n  o3: function () {\n    n9 = \"#3a3a3a\";\n    (d4 = \"#047804\"), (g3 = \"#006A00\");\n    c6 = q2;\n    q1 = 0;\n    j2();\n    e5();\n    createTrees();\n    b1();\n    a3();\n    o6();\n    var t = this;\n    t.m9(50);\n    t.g6(1, 0);\n    t.t3(50, 50, 39, 0, 40, 0);\n    t.g6(1, 0);\n    t.m9(25);\n    t.g9(-1, 0);\n    t.g9(1, 0);\n    t.addHill(50, 40);\n    t.g6(1, 0);\n    t.g9(-1, 0);\n    t.g9(1, 0);\n    t.g6(1, -40);\n    t.m9(50, -40);\n    t.m9(55, 0);\n    t.e9();\n    t.drawMap();\n    t.createRoadsideObjects(k1, 0.9, 10, 900, true);\n  },\n  o2: function () {\n    n9 = \"#3a3a3a\";\n    d4 = \"#047804\";\n    g3 = \"#006A00\";\n    c6 = q2;\n    q1 = 0;\n    j2();\n    o6();\n    e5();\n    createTrees();\n    b1();\n    a3();\n    j5();\n    var t = this;\n    t.m9(20);\n    t.m9(46, 0);\n    t.g6(1, 30);\n    t.m9(90, 0);\n    t.d7(1, 0);\n    t.m9(25, 0);\n    t.d7(1, 50);\n    t.m9(25, 0);\n    t.d7(-1, 0);\n    t.m9(68, -50);\n    t.d7(-1, 0);\n    t.d7(1, 0);\n    t.d7(1, 0);\n    t.m9(48, 0);\n    t.g6(1, -30);\n    t.m9(38, 0);\n    t.g9(-1, 0);\n    t.g9(1, 0);\n    t.e9();\n    t.drawMap();\n    t.createRoadsideObjects([e8], 0.3, 6, 1300, true);\n  },\n  n8: function () {\n    n9 = \"#3a3a3a\";\n    d4 = \"#5a5a5a\";\n    g3 = \"#626262\";\n    c6 = q2;\n    q1 = 0;\n    j2();\n    o6();\n    f8(false);\n    c3(false);\n    a4(false);\n    var t = this;\n    t.m9(100);\n    t.d7(1, 0);\n    t.m9(151, 0);\n    t.h1(1, 0);\n    t.m9(30, 0);\n    t.h1(1, 0);\n    t.m9(80, 0);\n    t.d7(-1, 0);\n    t.d7(-1, 0);\n    t.m9(20, 0);\n    t.d7(1, 0);\n    t.m9(10, 0);\n    t.h1(1, 0);\n    t.m9(50, 0);\n    t.d7(-1, 0);\n    t.d7(1, 0);\n    t.d7(1, 0);\n    t.m9(62, 0);\n    t.e9();\n    t.drawMap();\n    t.createRoadsideObjects(c8, 0.95, 20, 3300, false);\n    t.createStreetLights();\n  },\n  o4: function () {\n    n9 = \"#111111\";\n    c6 = \"#555555\";\n    q1 = \"#000000\";\n    d4 = \"#090909\";\n    g3 = \"#030303\";\n    j2();\n    o6();\n    f8(true);\n    c3(true);\n    a4(true);\n    i0();\n    var t = this;\n    t.m9(100);\n    t.addHardCurve180(1, 0);\n    t.h1(-1, 0);\n    t.m9(40, 0);\n    t.h1(1, 0);\n    t.h1(-1, 0);\n    t.h1(1, 0);\n    t.m9(50, 0);\n    t.d7(-1, 0);\n    t.m9(20, 0);\n    t.d7(1, 0);\n    t.h1(1, 0);\n    t.m9(60, 0);\n    t.d7(-1, 0);\n    t.d7(1, 0);\n    t.m9(51, 0);\n    t.h1(1, 0);\n    t.m9(110, 0);\n    t.e9();\n    t.drawMap();\n    t.createRoadsideObjects(c8, 0.95, 20, 3300, false);\n    t.createStreetLights();\n  },\n  lastY: function () {\n    return this.u0s.length == 0 ? 0 : this.u0s[this.u0s.length - 1].p3.v8.y;\n  },\n  o9: function (t) {\n    return this.u0s[t];\n  },\n  o9Count: function () {\n    return this.u0s.length;\n  },\n  r2: function () {\n    return this.v3Length;\n  },\n  e9: function () {\n    this.v3Length = v3.u0s.length * v2.u0Length;\n  },\n  addSegment: function (t, i) {\n    var a = this.u0s.length;\n    var r = this.lastY();\n    var e = i;\n    var s = a * v2.u0Length;\n    var n = (a + 1) * v2.u0Length;\n    var h = -q4;\n    var v = q4;\n    var f = 0;\n    if (t != 0) {\n      f = t * 40;\n      if (f < 0) {\n        f = -f;\n      }\n      f += 60;\n    }\n    this.u0s.push({\n      index: a,\n      p1: { v8: { x: h, y: r, z: s }, v0: {}, u6: {} },\n      p2: { v8: { x: v, y: r, z: s }, v0: {}, u6: {} },\n      p3: { v8: { x: v, y: e, z: n }, v0: {}, u6: {} },\n      p4: { v8: { x: h, y: e, z: n }, v0: {}, u6: {} },\n      v4: t,\n      r0: f,\n      t1: [],\n      cars: [],\n      color: false ? u4.DARK : u4.LIGHT,\n    });\n  },\n  easeIn: function (t, i, a) {\n    return t + (i - t) * Math.pow(a, 2);\n  },\n  easeOut: function (t, i, a) {\n    return t + (i - t) * (1 - Math.pow(1 - a, 2));\n  },\n  easeInOut: function (t, i, a) {\n    return t + (i - t) * (-Math.cos(a * Math.PI) / 2 + 0.5);\n  },\n  t3: function (t, i, a, r, e, s) {\n    var s = s || 0;\n    var n = this.l4 + s;\n    var h = this.lastY();\n    var v = h + Math.floor(e) * v2.u0Length;\n    var f,\n      c = t + i + a;\n    var u = 0;\n    var o = 0;\n    var l = this.u0s.length;\n    for (f = 0; f < t; f++) {\n      u = this.easeIn(0, r, f / t);\n      o += u;\n      this.addSegment(u, this.easeInOut(h, v, f / c));\n    }\n    for (f = 0; f < i; f++) {\n      u = r;\n      o += u;\n      this.addSegment(r, this.easeInOut(h, v, (t + f) / c));\n    }\n    for (f = 0; f < a; f++) {\n      u = this.easeInOut(r, 0, f / a);\n      o += u;\n      this.addSegment(u, this.easeInOut(h, v, (t + i + f) / c));\n    }\n    var d = 0;\n    if (o != 0) {\n      d = (n - this.l4) / o;\n    }\n    for (var p = l; p < this.u0s.length; p++) {\n      this.l4 += this.u0s[p].v4 * d;\n      this.u0s[p].angle = this.l4;\n    }\n    this.l4 = n;\n    this.u0s[this.u0s.length - 1].angle = n;\n  },\n  m9: function (t, i) {\n    i = i || 0;\n    this.t3(t, t, t, 0, i, 0);\n  },\n  addBumps: function () {\n    this.t3(10, 10, 10, 0, 5);\n    this.t3(10, 10, 10, 0, -2);\n    this.t3(10, 10, 10, 0, -5);\n    this.t3(10, 10, 10, 0, 8);\n    this.t3(10, 10, 10, 0, 5);\n    this.t3(10, 10, 10, 0, -7);\n    this.t3(10, 10, 10, 0, 5);\n    this.t3(10, 10, 10, 0, -2);\n  },\n  g6: function (t, i) {\n    this.t3(25, 100 * 1.4, 25, t * 4.25, i, t * 90);\n  },\n  g9: function (t, i) {\n    this.t3(25, 50, 25, t * 4.25, i, t * 30);\n  },\n  d7: function (t, i) {\n    this.t3(25, 50 * 1.5, 25, t * 6 * 0.96, i, t * 90);\n  },\n  h1: function (t) {\n    this.t3(18, 50 * 0.8, 18, t * 8, 0, t * 90);\n  },\n  addHardCurve180: function () {\n    this.t3(50, 50, 50, 7.5, 0, 180);\n  },\n  addHill: function (t, i) {\n    this.t3(t, t, t, 0, i, 0);\n  },\n  t3sideObject: function (t, i, a) {\n    var r = this.u0s[t];\n    var e = 0;\n    if (a < 0) {\n      e = r.p1.v8.x - 600;\n    } else {\n      e = r.p2.v8.x + 600;\n    }\n    r.t1.push({ u5: i, x: e });\n  },\n  n1: function (t) {\n    return this.u0s[Math.floor(t / v2.u0Length) % this.u0s.length];\n  },\n  drawMap: function () {\n    if (this.map == null) {\n      this.map = document.createElement(\"canvas\");\n    }\n    this.map.width = 600;\n    this.map.height = 600;\n    cntx = this.map.getContext(\"2d\");\n    var t = canvas.width;\n    var i = canvas.height;\n    j7(600, 600);\n    g0(\"#666666\");\n    cntx.lineWidth = 5;\n    var a = 0;\n    var r = 300;\n    var e = 30;\n    k3();\n    var s = 0.5;\n    p0(r, e);\n    for (var n = 0; n < this.u0s.length; n++) {\n      a = (this.u0s[n].angle / 180) * PI;\n      r += s * cos(a);\n      e += s * sin(a);\n      o8(r, e);\n      this.u0s[n].x = r;\n      this.u0s[n].y = e;\n    }\n    p2();\n    g0(q7);\n    cntx.lineWidth = 4;\n    p2();\n    s = 4;\n    t6.lineWidth = 3;\n    g0(q7);\n    k3();\n    a = ((this.u0s[0].angle + 90) / 180) * PI;\n    r -= s * cos(a);\n    e -= s * sin(a);\n    p0(r, e);\n    r += 2 * s * cos(a);\n    e += 2 * s * sin(a);\n    o8(r, e);\n    p2();\n  },\n  c9: function () {\n    cntx = j1.x;\n    this.m7 = j1.c;\n    j7(600, 600);\n    i5(this.map, 0, 0, 600, 600, 0, 0, 600, 600);\n    for (var t = 0; t < cars.length; t++) {\n      var i = cars[t].z;\n      var a = v3.n1(i);\n      k3();\n      t4(a.x, a.y, 5, 0, 2 * PI, false);\n      k4(r4);\n      s9();\n      cntx.lineWidth = 2;\n      g0(\"#999999\");\n      p2();\n    }\n    var r = cars[0].z;\n    var e = v3.n1(r);\n    k3();\n    t4(e.x, e.y, 5, 0, 2 * PI, false);\n    k4(\"#ff0000\");\n    s9();\n    t6.lineWidth = 2;\n    g0(q2);\n    p2();\n  },\n};\nvar v3 = null;\nvar numbers = [\"ONE\", \"TWO\", \"THREE\", \"FOUR\", \"FIVE\", \"SIX\", \"SEVEN\", \"EIGHT\"];\nvar Race = function () {\n  this.v3 = null;\n  this.state = 0;\n  this.f0 = 3;\n  this.lastTime = 0;\n  this.s1 = 15;\n  this.v3Number = 0;\n  this.zIsDown = false;\n  this.xIsDown = false;\n  this.raceNumber = 0;\n};\nRace.c4 = 800;\nRace.prototype = {\n  init: function () {},\n  start: function (t) {\n    b5(0);\n    if (t >= 4) {\n      t = 0;\n    }\n    this.raceNumber = t;\n    v3 = new v2();\n    switch (t) {\n      case 0:\n        v3.o3();\n        break;\n      case 1:\n        v3.o2();\n        break;\n      case 2:\n        v3.n8();\n        break;\n      case 3:\n        v3.o4();\n        break;\n    }\n    this.resetCars();\n    u1 = cars[0];\n    u1.b6();\n    this.state = 0;\n    this.f0 = 4;\n    this.lastTime = l2();\n  },\n  raceOver: function () {\n    this.state = 5;\n  },\n  keyDown: function (t) {\n    if (this.state !== 5) {\n      switch (t.keyCode) {\n        case 90:\n          this.zIsDown = true;\n          u1.setDrift(true);\n          break;\n        case 88:\n          this.xIsDown = true;\n          u1.s2(true);\n          break;\n        case 38:\n          u1.j0(true);\n          break;\n        case 40:\n          u1.r5(true);\n          break;\n        case 37:\n          u1.setTurnLeft(true);\n          break;\n        case 39:\n          u1.k8(true);\n          break;\n      }\n    } else {\n    }\n  },\n  keyUp: function (t) {\n    if (this.state != 5) {\n      switch (t.keyCode) {\n        case 90:\n          this.zIsDown = false;\n          u1.setDrift(false);\n          break;\n        case 88:\n          this.xIsDown = false;\n          u1.s2(false);\n          break;\n        case 38:\n          u1.j0(false);\n          break;\n        case 40:\n          u1.r5(false);\n          break;\n        case 37:\n          u1.setTurnLeft(false);\n          break;\n        case 39:\n          u1.k8(false);\n          break;\n      }\n    } else {\n      if (t.keyCode == 90) {\n        if (!this.zIsDown) {\n          this.start(this.raceNumber);\n        }\n        this.zIsDown = false;\n      }\n      if (t.keyCode == 88) {\n        if (!this.xIsDown) {\n          if (cars[0].g5 == \"1st\") {\n            this.start(this.raceNumber + 1);\n          }\n        }\n        this.xIsDown = false;\n      }\n    }\n  },\n  resetCars: function () {\n    cars = [];\n    var t, i, a, r, e, s, n;\n    for (var t = 0; t < this.s1; t++) {\n      e = v3.r2() - (this.s1 - t) * v2.u0Length * 13;\n      a = v3.n1(e);\n      var h = a.p1.v8.x;\n      var v = a.p2.v8.x;\n      i = new Car();\n      var f = 0;\n      if (t % 2) {\n        f = h / 2;\n      } else {\n        f = v / 2 - i.width;\n      }\n      i.index = t;\n      i.x = f;\n      i.z = e;\n      i.sprite = s;\n      i.v7 = 0;\n      i.percent = b2(i.z, v2.u0Length);\n      if (i.index !== 0) {\n        var c = 23e3;\n        if (i.index < 8 && i.index > 3) {\n          i.r6 = c * 0.905 - (r9() * (this.s1 - t - 1) * c) / 55;\n        } else if (i.index > 12) {\n          i.r6 = c * 0.905 - ((this.s1 - t - 1) * c) / 65;\n        } else {\n          i.r6 = c * 0.905 - ((this.s1 - t - 1) * c) / 45;\n        }\n        i.accel = c / 2;\n        if (i.index < 4) {\n          i.c5 = false;\n        } else if (i.index < 8) {\n          i.c5 = r9() > 0.4;\n          i.slowOnCorners = r9() > 0.6;\n        }\n      }\n      a.cars.push(i);\n      cars.push(i);\n    }\n  },\n  j3: function (t) {\n    var i = l2();\n    if (i - this.lastTime > Race.c4) {\n      this.lastTime = l2();\n      this.f0--;\n      if (this.f0 == 3) {\n        speak(\"RACE\");\n      }\n      if (this.f0 == 2) {\n        speak(numbers[this.raceNumber]);\n      }\n      if (this.f0 <= 0) {\n        this.state = 1;\n        this.f0 = 3;\n        i7(220, 1 / 4);\n      }\n    }\n    v0.update(t);\n  },\n  f9: function (t) {\n    var i = l2();\n    if (i - this.lastTime > Race.c4) {\n      this.lastTime = l2();\n      this.f0--;\n      if (this.f0 <= 0) {\n        i7(440, 1 / 2);\n        this.state = 4;\n      } else {\n        i7(220, 1 / 4);\n      }\n    }\n    v0.update(t);\n  },\n  updateRace: function (t) {\n    var i = v3.n1(u1.z);\n    var a = u1.v7Percent;\n    var r = t * 2 * a;\n    var e = v0.z;\n    for (var s = 0; s < cars.length; s++) {\n      cars[s].update(t);\n    }\n    v0.update(t);\n    h3 = l0(h3, (i2 * i.v4 * (v0.z - e)) / v2.u0Length, 1);\n    h4 = l0(h4, (i3 * i.v4 * (v0.z - e)) / v2.u0Length, 1);\n    h6 = l0(h6, (i4 * i.v4 * (v0.z - e)) / v2.u0Length, 1);\n  },\n  h7: function () {},\n  update: function (t) {\n    switch (this.state) {\n      case 0:\n        this.j3(t);\n        break;\n      case 1:\n        this.f9(t);\n        break;\n      case 5:\n      case 4:\n        this.updateRace(t);\n        break;\n    }\n  },\n  render: function () {\n    l7();\n    if (this.state == 0) {\n      t6.font = \"italic bold 350px \" + q6;\n      if (this.f0 < 4) {\n        k4(r4);\n        k9(\"RACE\", 14, 304);\n        k4(q7);\n        k9(\"RACE\", 10, 300);\n      }\n      if (this.f0 < 3) {\n        if (this.raceNumber == 0) {\n          t6.font = \"italic bold 440px \" + q6;\n        } else if (this.raceNumber == 1) {\n          t6.font = \"italic bold 430px \" + q6;\n        } else if (this.raceNumber == 2) {\n          t6.font = \"italic bold 290px \" + q6;\n        } else if (this.raceNumber == 3) {\n          t6.font = \"italic bold 358px \" + q6;\n        }\n        k4(r4);\n        k9(numbers[this.raceNumber], 14, 674);\n        k4(q7);\n        k9(numbers[this.raceNumber], 10, 670);\n      }\n    }\n    if (this.state == 1) {\n      t6.font = \" 300px \" + q6;\n      t6.fillStyle = \"#111111\";\n      t6.fillText(this.f0, 449, 254);\n      t6.fillStyle = q7;\n      t6.fillText(this.f0, 445, 250);\n    }\n    if (this.state == 4) {\n      k4(q7);\n      g0(q7);\n      t6.font = \" 80px \" + q6;\n      t6.fillText(u1.n2(), 10, 80);\n      t6.font = \" 40px \" + q6;\n      t6.fillText(\"Lap \" + u1.getLap() + \" of 2\", 10, 130);\n      t6.fillText(\"Lap Time: \" + u1.d2().toFixed(2), 10, 180);\n      t6.font = \" 80px \" + q6;\n      var t = (\"000\" + Math.round(u1.r7() / 100).toString(10)).substr(-3);\n      t6.fillText(t + \"km/h\", 695, 80);\n      t6.font = \" 40px \" + q6;\n      t6.fillText(\"Turbo \", 670, 136);\n      k3();\n      t6.rect(796, 110, 208, 28);\n      p2();\n      m0(800, 114, u1.o1 * 2, 20);\n      if (cars[0].e7 > 0) {\n        t6.font = \" 160px \" + q6;\n        k4(q7);\n        t6.fillText(cars[0].n2(), 334, 184);\n      }\n    }\n    if (this.state == 5) {\n      t6.font = \" 300px \" + q6;\n      k4(q7);\n      t6.fillText(cars[0].g5, 300, 290);\n      t6.font = \" 40px \" + q6;\n      var i = 380;\n      if (cars[0].g5 == \"1st\") {\n        t6.fillText(\"x: Next Race\", 397, i);\n        i += 80;\n      }\n      t6.fillText(\"z: Retry\", 445, i);\n    }\n  },\n};\nvar canvas = document.getElementById(\"gameCanvas\");\nvar t6 = canvas.getContext(\"2d\");\nvar u7 = false;\nvar l2 = function () {\n  return performance.now();\n};\ndocument.addEventListener(\"keydown\", function (t) {\n  if (u7) {\n    race.keyDown(t);\n  } else {\n    m4.keyDown(t);\n  }\n});\ndocument.addEventListener(\"keyup\", function (t) {\n  if (u7) {\n    race.keyUp(t);\n  } else {\n    m4.keyUp(t);\n  }\n});\nvar now = l2();\nvar last = l2();\nvar dt = 0;\nvar gdt = 0;\nvar cars = [];\nvar u1 = null;\nvar v0 = new u3();\nvar race = new Race();\nv3 = new v2();\nvar m4 = new m5(canvas, t6);\nfunction startGame(t) {\n  i6();\n  speak(\"Start\");\n  u7 = true;\n  v0.reset();\n  race.start(0);\n}\nm4.init();\nfunction frame() {\n  now = l2();\n  dt = Math.min(1, (now - last) / 1e3);\n  gdt = gdt + dt;\n  if (!u7) {\n    m4.render(dt);\n    gdt = 0;\n  } else {\n    n3 = false;\n    var t = 1 / 180;\n    while (gdt > t) {\n      gdt = gdt - t;\n      race.update(t);\n    }\n    v3.c9();\n    race.render();\n    last = now;\n  }\n  requestAnimationFrame(frame);\n}\nframe();\nvar s0 = null;\nvar n7 = null;\nvar f6 = null;\nvar f5 = null;\nvar d5 = 0;\nvar f4 = 0;\nvar d6 = 1;\nvar f3 = 1;\nvar f7 = [];\nvar g7 = [];\nfunction b0(t) {\n  f3 = 1 + t / 1e4;\n}\nfunction i6() {\n  if (s0 == null) {\n    s0 = new (window.AudioContext || window.webkitAudioContext)();\n    a0();\n    a1();\n    a2();\n    f6 = s0.createScriptProcessor(1024, 1, 1);\n    f6.onaudioprocess = function (t) {\n      var i = t.outputBuffer.getChannelData(0);\n      var a;\n      for (var r = 0; r < i.length; ++r) {\n        if (u1.v5) {\n          d5 += d6 + Math.random();\n          f4 += f3;\n          a = Math.floor(f4) % g7.length;\n          i[r] = g7[a];\n          a = Math.floor(d5) % f7.length;\n          i[r] += f7[a] + Math.random() * 0.01;\n        } else {\n          d5 += d6 + Math.random() * 1;\n          a = Math.floor(d5) % f7.length;\n          i[r] = f7[a] + Math.random() * 0.01;\n        }\n        if (u1.h2 > 0) {\n          i[r] += Math.random() * 0.4;\n        }\n      }\n      d5 %= f7.length;\n      f4 %= g7.length;\n    };\n    f5 = s0.createGain();\n    f5.gain.value = 0.14;\n    f6.connect(f5);\n    f5.connect(s0.destination);\n  }\n}\nfunction a1() {\n  var t = 1024;\n  g7 = [];\n  var i = 0;\n  for (var a = 0; a < t; a++) {\n    for (var r = 0; r < 12; r++) {\n      g7[i++] = Math.random() * 0.01;\n      if (i >= t) {\n        break;\n      }\n    }\n    var e = 0.2;\n    if (i < t) {\n      for (var s = 0; s < 2; s++) {\n        g7[i++] = e;\n        if (i >= t) {\n          break;\n        }\n      }\n    }\n  }\n  for (var a = 0; a < t; a++) {\n    g7[a] += Math.random() * 0.5 - 0.05;\n  }\n}\nfunction a0() {\n  var t = 1024;\n  f7 = [];\n  var i = 1;\n  var a, r;\n  var e = 0;\n  f7[e++] = 1;\n  for (var s = 0.05; s < 1; s += Math.random() / 8 + 0.01) {\n    r = Math.floor(s * t);\n    a = Math.random() * 2 - 1;\n    var n = r - (e - 1);\n    var h = (a - i) / n;\n    for (var v = 0; v < n; v++) {\n      f7[e++] = i + h * v;\n    }\n    i = a;\n  }\n  n = t - (e - 1);\n  var h = (1 - i) / n;\n  for (var v = 0; v < n; v++) {\n    f7[e++] = i + h * v;\n  }\n}\nfunction a2() {\n  var t = 2 * s0.sampleRate;\n  n7 = s0.createBuffer(1, t, s0.sampleRate);\n  var i = n7.getChannelData(0);\n  for (var a = 0; a < t; a++) {\n    i[a] = Math.random() * 2 - 1;\n  }\n}\nfunction i7(t, i) {\n  var a = s0.createGain();\n  var r = s0.createOscillator();\n  r.connect(a);\n  a.connect(s0.destination);\n  r.type = \"triangle\";\n  r.frequency.value = t;\n  a.gain.value = 0.1;\n  r.start(s0.currentTime);\n  r.stop(s0.currentTime + i);\n}\nfunction b5(t) {\n  d6 = 0.2 + t * 2;\n}\nfunction b8() {}\nvar i1 = 0;\nfunction g8() {\n  var t = l2();\n  if (t - i1 < 1e3) {\n    return;\n  }\n  i1 = t;\n  var i = 1 / 2;\n  var a = s0.createGain();\n  var r = null;\n  r = s0.createBufferSource();\n  r.connect(a);\n  a.connect(s0.destination);\n  r.buffer = n7;\n  a.gain.linearRampToValueAtTime(0.5, s0.currentTime);\n  a.gain.linearRampToValueAtTime(0, s0.currentTime + i * 0.7);\n  r.playbackRate.setValueAtTime(0.035, s0.currentTime);\n  r.playbackRate.setValueAtTime(0.002, s0.currentTime + i);\n  r.start(s0.currentTime);\n  r.stop(s0.currentTime + i);\n}\nvar i9 = \"\";\nfunction speak(t) {\n  var i = window.speechSynthesis.getVoices();\n  if (i9 == \"\") {\n    for (var a = 0; a < i.length; a++) {\n      if (i[a].lang === \"en-GB\") {\n        i9 = i[a];\n        break;\n      }\n    }\n    if (i9 === \"\" && i.length > 0) {\n      i9 = i[0];\n    }\n  }\n  var r = new SpeechSynthesisUtterance();\n  r.text = t;\n  if (i9 != \"\") {\n    r.voice = i9;\n  }\n  window.speechSynthesis.speak(r);\n}\n",
      "status": "[6]<br><span style=\"font-size:8px\">3ms<span></span></span>",
      "output": "",
      "type": "code"
    }
  ],
  "source": "https://github.com/gopi-suvanam/jsnb",
  "run_on_load": false
}